FROM m0bius/base:latest
MAINTAINER <stefanomunari.sm@gmail.com>

ENV TERM xterm
ENV PROJECT_PATH /home/cds
ENV PATH_FINDER_ROOT /home/cds/path-finder

# <DEV_MODE>
ADD loop.sh /tmp/
# </DEV_MODE>

# <DEV_MODE>
RUN chmod +x /tmp/loop.sh
# </DEV_MODE>
RUN useradd -m -p cds cds
USER cds
RUN mkdir -p $PATH_FINDER_ROOT
WORKDIR $PATH_FINDER_ROOT
# <DEV_MODE>
ENTRYPOINT ["sh","/tmp/loop.sh","&"]
# </DEV_MODE>
# <PROD_MODE>
ENTRYPOINT ["make","run"]
# </PROD_MODE>